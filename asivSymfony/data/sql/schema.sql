CREATE TABLE calendar_excepcion (id_calendar_exception INT AUTO_INCREMENT, inicio_excepcion TIME NOT NULL, fin_excepcion TIME NOT NULL, status TINYINT DEFAULT '1', fecha_excepcion DATE, motivo_excepcion VARCHAR(45) NOT NULL, PRIMARY KEY(id_calendar_exception)) ENGINE = INNODB;
CREATE TABLE casa_medica (id_casa_medica INT AUTO_INCREMENT, nombre VARCHAR(45) NOT NULL, nombre_contacto VARCHAR(100), telefono VARCHAR(15) NOT NULL, fecha_contrato DATE NOT NULL, status TINYINT DEFAULT '1', PRIMARY KEY(id_casa_medica)) ENGINE = INNODB;
CREATE TABLE cita (id_cita INT AUTO_INCREMENT, id_paciente INT NOT NULL, id_empleado INT NOT NULL, fecha_cita DATE NOT NULL, inicio_hora_cita TIME NOT NULL, fin_hora_cita TIME NOT NULL, id_estado_cita INT NOT NULL, fecha_creacion DATE NOT NULL, peso_pacientel DECIMAL(4, 2) NOT NULL, temperatura_paciente DECIMAL(3, 2) NOT NULL, presion_paciente DECIMAL(3, 2) NOT NULL, altura_paciente DECIMAL(3, 2) NOT NULL, INDEX id_empleado_idx (id_empleado), INDEX id_estado_cita_idx (id_estado_cita), INDEX id_paciente_idx (id_paciente), PRIMARY KEY(id_cita)) ENGINE = INNODB;
CREATE TABLE cita_comentario (id_cita_comentario INT AUTO_INCREMENT, id_cita INT NOT NULL, comentario TEXT NOT NULL, fecha_comentario DATE NOT NULL, INDEX id_cita_idx (id_cita), PRIMARY KEY(id_cita_comentario)) ENGINE = INNODB;
CREATE TABLE cuotas_cita (id_cuotas_cita INT AUTO_INCREMENT, id_cita INT NOT NULL, monto_donacion DECIMAL(3, 2) DEFAULT 0.00 NOT NULL, INDEX id_cita_idx (id_cita), PRIMARY KEY(id_cuotas_cita)) ENGINE = INNODB;
CREATE TABLE departamento (id_departamento INT AUTO_INCREMENT, nombre VARCHAR(45) NOT NULL, status TINYINT DEFAULT '1' NOT NULL, PRIMARY KEY(id_departamento)) ENGINE = INNODB;
CREATE TABLE empleado (id_empleado INT AUTO_INCREMENT, id_usuario INT NOT NULL, id_posicion INT NOT NULL, id_departamento INT NOT NULL, fecha_contratacion DATE NOT NULL, INDEX id_departamento_idx (id_departamento), INDEX id_posicion_idx (id_posicion), INDEX id_usuario_idx (id_usuario), PRIMARY KEY(id_empleado)) ENGINE = INNODB;
CREATE TABLE estado_cita (id_estado_cita INT AUTO_INCREMENT, nombre VARCHAR(45) NOT NULL, status TINYINT DEFAULT '1' NOT NULL, PRIMARY KEY(id_estado_cita)) ENGINE = INNODB;
CREATE TABLE horario_empleado (id_horario_empleado INT AUTO_INCREMENT, id_empleado INT NOT NULL, hora_inicio TIME NOT NULL, hora_fin TIME NOT NULL, dia_horario INT NOT NULL, INDEX id_empleado_idx (id_empleado), PRIMARY KEY(id_horario_empleado)) ENGINE = INNODB;
CREATE TABLE medicina (id_medicina INT AUTO_INCREMENT, nombre VARCHAR(45) NOT NULL, id_tipo_presentacion INT NOT NULL, id_casa_medica INT NOT NULL, limite_menor INT NOT NULL, limite_normal INT NOT NULL, limite_optimo INT NOT NULL, precio_unidad DECIMAL(10, 2) NOT NULL, existencia INT DEFAULT '0', INDEX id_casa_medica_idx (id_casa_medica), INDEX id_tipo_presentacion_idx (id_tipo_presentacion), PRIMARY KEY(id_medicina)) ENGINE = INNODB;
CREATE TABLE paciente (id_paciente INT AUTO_INCREMENT, tipo_sanguineo VARCHAR(10) NOT NULL, fecha_nacimiento DATE NOT NULL, id_usuario INT NOT NULL, INDEX id_usuario_idx (id_usuario), PRIMARY KEY(id_paciente)) ENGINE = INNODB;
CREATE TABLE paciente_telefono (id_paciente_telefono INT AUTO_INCREMENT, telefono VARCHAR(20) NOT NULL, status TINYINT DEFAULT '1', paciente_id INT NOT NULL, INDEX paciente_id_idx (paciente_id), PRIMARY KEY(id_paciente_telefono)) ENGINE = INNODB;
CREATE TABLE posicion (id_posicion INT AUTO_INCREMENT, nombre VARCHAR(45) NOT NULL, status TINYINT DEFAULT '1', PRIMARY KEY(id_posicion)) ENGINE = INNODB;
CREATE TABLE receta_cita (id_receta_cita INT AUTO_INCREMENT, id_cita INT NOT NULL, id_medicina INT NOT NULL, cantidad INT DEFAULT '1', INDEX id_cita_idx (id_cita), INDEX id_medicina_idx (id_medicina), PRIMARY KEY(id_receta_cita)) ENGINE = INNODB;
CREATE TABLE rol (id_rol INT AUTO_INCREMENT, nombre VARCHAR(45) NOT NULL, status TINYINT DEFAULT '1', PRIMARY KEY(id_rol)) ENGINE = INNODB;
CREATE TABLE tipo_presentacion (id_tipo_presentacion INT AUTO_INCREMENT, nombre VARCHAR(45) NOT NULL, status TINYINT DEFAULT '1' NOT NULL, PRIMARY KEY(id_tipo_presentacion)) ENGINE = INNODB;
CREATE TABLE usuario (id_usuario INT AUTO_INCREMENT, username VARCHAR(45) NOT NULL, email VARCHAR(200) NOT NULL, password VARCHAR(200) NOT NULL, nombre VARCHAR(45) NOT NULL, apellido VARCHAR(45), genero TINYINT NOT NULL, ultimo_ingreso DATETIME, id_rol INT, status TINYINT DEFAULT '1', INDEX id_rol_idx (id_rol), PRIMARY KEY(id_usuario)) ENGINE = INNODB;
ALTER TABLE cita ADD CONSTRAINT cita_id_paciente_paciente_id_paciente FOREIGN KEY (id_paciente) REFERENCES paciente(id_paciente);
ALTER TABLE cita ADD CONSTRAINT cita_id_estado_cita_estado_cita_id_estado_cita FOREIGN KEY (id_estado_cita) REFERENCES estado_cita(id_estado_cita);
ALTER TABLE cita ADD CONSTRAINT cita_id_empleado_empleado_id_empleado FOREIGN KEY (id_empleado) REFERENCES empleado(id_empleado);
ALTER TABLE cita_comentario ADD CONSTRAINT cita_comentario_id_cita_cita_id_cita FOREIGN KEY (id_cita) REFERENCES cita(id_cita);
ALTER TABLE cuotas_cita ADD CONSTRAINT cuotas_cita_id_cita_cita_id_cita FOREIGN KEY (id_cita) REFERENCES cita(id_cita);
ALTER TABLE empleado ADD CONSTRAINT empleado_id_usuario_usuario_id_usuario FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario);
ALTER TABLE empleado ADD CONSTRAINT empleado_id_posicion_posicion_id_posicion FOREIGN KEY (id_posicion) REFERENCES posicion(id_posicion);
ALTER TABLE empleado ADD CONSTRAINT empleado_id_departamento_departamento_id_departamento FOREIGN KEY (id_departamento) REFERENCES departamento(id_departamento);
ALTER TABLE horario_empleado ADD CONSTRAINT horario_empleado_id_empleado_empleado_id_empleado FOREIGN KEY (id_empleado) REFERENCES empleado(id_empleado);
ALTER TABLE medicina ADD CONSTRAINT miti FOREIGN KEY (id_tipo_presentacion) REFERENCES tipo_presentacion(id_tipo_presentacion);
ALTER TABLE medicina ADD CONSTRAINT medicina_id_casa_medica_casa_medica_id_casa_medica FOREIGN KEY (id_casa_medica) REFERENCES casa_medica(id_casa_medica);
ALTER TABLE paciente ADD CONSTRAINT paciente_id_usuario_usuario_id_usuario FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario);
ALTER TABLE paciente_telefono ADD CONSTRAINT paciente_telefono_paciente_id_paciente_id_paciente FOREIGN KEY (paciente_id) REFERENCES paciente(id_paciente);
ALTER TABLE receta_cita ADD CONSTRAINT receta_cita_id_medicina_medicina_id_medicina FOREIGN KEY (id_medicina) REFERENCES medicina(id_medicina);
ALTER TABLE receta_cita ADD CONSTRAINT receta_cita_id_cita_cita_id_cita FOREIGN KEY (id_cita) REFERENCES cita(id_cita);
ALTER TABLE usuario ADD CONSTRAINT usuario_id_rol_rol_id_rol FOREIGN KEY (id_rol) REFERENCES rol(id_rol);
